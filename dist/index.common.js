"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const o=require("vue");function T(t){return{all:t=t||new Map,on:function(n,e){var i=t.get(n);i?i.push(e):t.set(n,[e])},off:function(n,e){var i=t.get(n);i&&(e?i.splice(i.indexOf(e)>>>0,1):t.set(n,[]))},emit:function(n,e){var i=t.get(n);i&&i.slice().map(function(c){c(e)}),(i=t.get("*"))&&i.slice().map(function(c){c(n,e)})}}}const a=T(),_=0,y=()=>_+1,p=()=>(t,n)=>{const e={...t,id:y(),group:t.group||""};return a.emit("notify",{notification:e,timeout:n}),()=>a.emit("close",e.id)},d="context",l=o.defineComponent({__name:"Notification",props:{maxNotifications:{default:10},enter:{default:""},enterFrom:{default:""},enterTo:{default:""},leave:{default:""},leaveFrom:{default:""},leaveTo:{default:""},move:{default:""},moveDelay:{default:""}},emits:["close"],setup(t,{emit:n}){const e=t,i=o.inject(d),c=o.reactive({notifications:[],timeouts:{}}),u=o.computed(()=>c.notifications.filter(s=>s.group===i.group)),v=o.computed(()=>i.position==="bottom"?[...u.value].slice(0,e.maxNotifications):[...u.value].reverse().slice(0,e.maxNotifications)),f=s=>{c.notifications.splice(c.notifications.findIndex(r=>r.id===s),1),clearTimeout(c.timeouts[s])},g=({notification:s,timeout:r})=>{c.notifications.push(s),c.timeouts[s.id]=window.setTimeout(()=>{f(s.id)},r||3e3)},N=s=>{n("close"),f(s)};return o.onMounted(()=>{a.on("notify",g),a.on("close",f)}),(s,r)=>(o.openBlock(),o.createBlock(o.TransitionGroup,{"enter-active-class":o.unref(u).length>1?[e.enter,e.moveDelay].join(" "):e.enter,"enter-from-class":e.enterFrom,"enter-to-class":e.enterTo,"leave-active-class":e.leave,"leave-from-class":e.leaveFrom,"leave-to-class":e.leaveTo,"move-class":e.move},{default:o.withCtx(()=>[o.renderSlot(s.$slots,"default",{notifications:o.unref(v),close:N})]),_:3},8,["enter-active-class","enter-from-class","enter-to-class","leave-active-class","leave-from-class","leave-to-class","move-class"]))}}),m=o.defineComponent({__name:"NotificationGroup",props:{group:{default:""},position:{default:"top"}},setup(t){const n=t;return o.provide(d,{group:n.group,position:n.position}),(e,i)=>o.renderSlot(e.$slots,"default",{group:t.group})}});function x(t){t.config.globalProperties.$notify=p(),t.component("Notification",l),t.component("NotificationGroup",m),t.component("notification",l),t.component("notificationGroup",m)}const h={install:x};function C(){return o.defineComponent((n,{slots:e})=>()=>o.h(l,n,e))}const w=p();exports.Notification=l;exports.NotificationGroup=m;exports.createNotifier=p;exports.default=h;exports.defineNotificationComponent=C;exports.notify=w;
